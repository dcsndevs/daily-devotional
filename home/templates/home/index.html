{% load static %}
{% load crispy_forms_tags %}
{% url 'home' as 'daily' %}
{% url 'about' as member_area_url %}
{% url 'account_login' as login_url %}
{% url 'account_signup' as signup_url %}
{% url 'account_logout' as logout_url %}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">
    <link rel="stylesheet" href="{% static 'css/index-style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    {% block custom_css %}{% endblock %}
    <title>{% block title %}{% endblock %}</title>
</head>
<body>
    <div class="first-half-color fix-top"></div>
    <div class="second-half-color fix-bottom"></div>

    <header class="header">
        <nav class="navbar navbar-expand-lg navbar-dark py-3 fixed-top transparent-navbar">
            <div class="container">
              <a href="{% url 'home' %}" class="navbar-brand">Haven Church</a>
      
              <div>
                <button
                    class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navprofilemenu">
                    <i class="fas fa-user"></i>
                </button>
              
                <button
                    class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navmenu">
                    <i class="fas fa-bars"></i>
                </button>
              </div>
      
              <div class="collapse navbar-collapse" id="navmenu">
                <ul class="navbar-nav ms-auto">

                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi-book"></i> Devotional</a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="{% url 'daily' %}">Today's Devotional</a></li>
                        <li><a class="dropdown-item" href="{% url 'archive' %}">Devotional Archive</a></li>
                    </ul>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi-clock"></i>Programmes</a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="{% url 'current_programmes' %}">Current Event</a></li>
                        <li><a class="dropdown-item" href="{% url 'programe_list' %}">All Events</a></li>
                    </ul>
                </li>
                    
                    {% if user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'bible' %}" aria-current="Bible app"><i class="bi-phone"></i> Bible App</a>
                    </li>
                    
                    {% else %}
                    {% endif %}
                    <li class="nav-item">
                        <a class="nav-link" href="#contact"><i class="bi-envelope"></i> Contact</a>
                    </li>
                    </ul>
                </div>
                
                <div class="collapse navbar-collapse" id="navprofilemenu">
                    <ul class="navbar-nav">
                        {% if user.is_authenticated %}
                        <li class="nav-item">
                          <a class="nav-link" href="{% url 'view_membership_profile' %}" aria-current="member area"><i class="bi-person"></i> Member Area</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'account_logout' %}"><i class="bi-key"></i> Logout</a>
                        </li>
                        
                        {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'registration' %}"><i class="bi-pen"></i> Sign Up</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'account_login' %}"><i class="bi-key"></i> Log In</a>
                        </li>
                        {% endif %}
                    </ul>
              </div>
            </div>
            <div>
              {% for message in messages %}
                  <div class="alert {{ message.tags }} alert-dismissible
                  fade show text-light align-items-right" id="msg" role="alert">
                  <em>{{ message | safe }}</em>
                  <button type="button" class="btn btn-warning btn-sm rounded-circle"
                      data-bs-dismiss="alert" aria-label="Close">x</button>
                  </div>
                {% endfor %}
            </div>
        </nav>
    
    </header>

    <!-- displaying Django messages -->
    <div class="container">
        <div class="row">
          <div class="col-md-8 offset-md-2">
              
          </div>
        </div>
    </div>
    
    <main>
        <section class="text-light p-5 p-lg-0 pt-lg-5 text-center overlap-section ">
  
          <div class="container ">
            <div class="d-sm-flex align-items-center">
              <div>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <h1>Welcome to <span class="text-warning"> Church!</span></h1>
                <p class="lead my-4 d-quote">
                  “I am the light of the world. Whoever follows me will not walk in darkness, 
                  but will have the light of life.” (John 8:12) -
                  Jesus
                </p>
              </div>
            </div>
          </div>
        </section>

        <section class="p-5">
          <div class="p-0 card container">
            <div class="row align-items-center justify-content-between">
              
              <div class="col-md">
                <img src="https://res.cloudinary.com/djhi60enx/image/upload/v1708376293/uygxzxhjjxqivfotuguy.jpg" class="img-fluid" alt="pastor-rich-picture" />
              </div>
              <div class="col-md p-5">
                <h2 class="text-warning">Pastor's Message</h2>
                <p class="lead">
                  Welcome to Haven Church!!
                </p>
                <p>
                  It's God's desire that all men everywhere shall be saved. Salvation can only come through Jesus.
                  Not by your works alone, but by faith in Jesus.
                  Join us as we carry this message of salvation to the far ends of the world.
                  God bless you!
                  
                </p>
                <a href="{% url 'account_login' %}" class="btn btn-warning mt-3">
                  <i class="bi bi-chevron-right"></i> Join us
                </a>
              </div>
              
            </div>
          </div>
        </section>

        <section class="p-5">
          <div class="p-0 card container">
            <div class="row align-items-center justify-content-between">
              
              <div class="col-md p-5">
                <h2 class="text-warning">Daily Devotional</h2>
                <p class="lead">
                  The devotional is our foremost tool of reaching the nations of the workl with our gospel.
                  Daily, Pastor shares insight on God's world as it applies to our lives.
                </p>
                
                <a href="{% url 'daily' %}" class="btn btn-warning mt-3">
                  <i class="bi bi-chevron-right"></i> Today's Devotional
                </a>
              </div>
              <div class="col-md">
                <img src="https://res.cloudinary.com/djhi60enx/image/upload/v1709291747/bible-study_w3wzfm.jpg" class="img-fluid" alt="pastor-rich-picture" />
              </div>
              
            </div>
          </div>
        </section>
         <!-- Upcoming events tab  -->
        <section class="container">
          <div class="row">
            <div class="col-md">
              <h2 class="text-center mb-4">Upcoming Events</h2>
            </div>
          </div>
          <div class="row">
            {% for programme in programmes %}
            <div class="col-md">
              <div class="card bg-dark text-light mb-4">
                <div class="card-body text-center">
                  <h3 class="card-title mb-3">{{ programme.title }}</h3>
                  <p class="card-text">{{ programme.date_of_event }}</p>
                  <p class="card-text">{{ programme.location }}</p>
                  <a href="events/{{ programme.slug }}" class="btn btn-warning btn-sm">Details</a>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </section>

        <!-- Contact Form -->
        <section id="contact">
          <div class="container">
            <div class="row text-center g-4">
              <div class="col-sm">
                <div class="card bg-dark text-light">
                  <div class="card-body text-center">
                    <div class="h3 mb-3">
                      <i class="bi bi-chat"></i> <span>Contact us</span>
                    </div>
                    <form method="post">
                      {{ home_contact_form | crispy }}
                      {% csrf_token %}
                      <button class="btn btn-warning"
                        type="submit">Submit</button>
                    </form>
                  </div>
                </div>
              </div>
        </section>
    </main>
    
    <footer class="footer mt-auto py-3">
      <div class="container">
        <span class="text-muted">Copyright &copy; 2024 Haven Church</span>
      </div>
  </footer>

    <script src="{% static 'js/navbar.js' %}"></script> 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>  
    {% block js_script %}
      <script src="{% static 'js/comments.js' %}"></script>
    {% endblock %}
</body>
</html>